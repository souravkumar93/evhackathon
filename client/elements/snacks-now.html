<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="snacks-now">
    <template>
        <style>
            .options {
                height: 30px;
                border-bottom: 1px solid #eee;
                font-size: 16px;
                font-family: monospace;
                padding-top: 12px;
                padding-left: 16px;
                cursor: pointer;
            }
            
            .options:hover {
                background: #eee;
            }
            
            .side-header {
                box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.2);
            }
            
            paper-toolbar {
                font-size: 20px;
            }
            
            .profile {
                border-bottom: 1px solid #eee;
                display: flex;
            }
            
            .profile img {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                margin: 12px 16px;
            }
            
            .profile div {
                flex: 70%;
                padding: 22px 8px;
                font-size: 18px;
                color: #555;
            }
        </style>
        <div class="main-content">
            <paper-drawer-panel id="drawerPanel">
                <paper-header-panel drawer class="side-header">
                    <paper-toolbar>
                        <div>Menu</div>
                    </paper-toolbar>
                    <div class="profile" index="0">
                        <img src="../images/pokemon.jpg">
                        <div>Ramesh</div>
                    </div>
                    <div on-tap="_changeMenu" class="options" index="0"> Scan QR </div>
                    <div on-tap="_changeMenu" class="options" index="1"> Orders </div>
                </paper-header-panel>
                <paper-header-panel main>
                    <paper-toolbar>
                        <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
                        <div>Snacks Now</div>
                    </paper-toolbar>
                    <iron-pages selected="{{selected}}">
                        <div>
                            <home-element id="homeElement"></home-element>
                        </div>
                        <div>
                            <order-list id="orderList"></order-list>
                        </div>                        
                    </iron-pages>
                </paper-header-panel>
            </paper-drawer-panel>
        </div>
    </template>
    <script>
    Polymer({
        is: "snacks-now",
        properties: {
            selected: {
                type: Number,
                value: 0
            }
        },
        listeners : {
            'order-list' : '_showOrderList'
        },
        _changeMenu: function(e) {
            var index = e.currentTarget.getAttribute('index');
            index = parseInt(index);
            if (index === 0)
                this.$.homeElement._startScan();
            else
                this.$.homeElement._stopScan();

            if (index === 1)
                this.$.orderList.getOrderList();
            this.set('selected', index);
            this.closeDrawerMenu();
        },
        closeDrawerMenu: function() {
            this.$.drawerPanel.closeDrawer();
        },
        _showOrderList : function(){
            this.$.orderList.getOrderList();
            this.set('selected', 1);
        }
    })
    </script>
</dom-module>